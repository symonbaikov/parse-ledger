# Bank of America (USA)
name: "Bank of America"
country: "US"
language: "en"
locale: "en-US"
domain: "bankofamerica.com"
encoding: "UTF-8"

# Language patterns
patterns:
  date:
    formats:
      - "MM/dd/yyyy"
      - "MM-dd-yyyy"
      - "yyyy-MM-dd"
    separators: ["/", "-"]
    monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
  
  number:
    decimalSeparator: "."
    thousandsSeparator: ","
    currencySymbols: ["$", "USD"]
    negativeFormat: "prefix"
    
  amount:
    patterns:
      - "\\$?\\d{1,3},\\d{3}\\.\\d{2}"
      - "\\$?\\d+\\.\\d{2}"
    keywords: ["amount", "total", "sum", "value"]

# Column mapping (English headers)
columns:
  date:
    keywords: ["date", "transaction date", "post date", "effective date"]
    position: 0
    required: true
  
  description:
    keywords: ["description", "desc", "memo", "details", "purpose", "note"]
    position: 1
    required: true
  
  amount:
    keywords: ["amount", "sum", "total", "value", "debit", "credit"]
    position: 2
    required: true
    
  currency:
    keywords: ["currency", "curr", "ccy", "USD"]
    position: 3
    required: false
    
  counterparty:
    keywords: ["payee", "payer", "beneficiary", "recipient", "merchant"]
    position: 4
    required: false

# Transaction type patterns
transactionTypes:
  debit:
    keywords: ["debit", "debit amount", "withdrawal", "expense", "payment", "purchase"]
    patterns: ["-\\$?\\d+", "^(?!\\+).*\\d+", "\\d+\\.\\d{2}-"]
    
  credit:
    keywords: ["credit", "credit amount", "deposit", "income", "refund"]
    patterns: ["\\+\\$?\\d+", "^\\+.*\\d+", "\\d+\\.\\d{2}\\+"]

# Header extraction
header:
  patterns:
    - "BANK OF AMERICA"
    - "ACCOUNT STATEMENT"
    - "TRANSACTION HISTORY"
    - "ACCOUNT SUMMARY"
    
  accountNumber:
    patterns:
      - "account\\s*#?\\s*\\d{4,}"
      - "card\\s*ending\\s*in\\s*\\d{4}"
      - "****\\d{4}"
      
  period:
    patterns:
      - "statement\\s+period\\s*[:：]\\s*(\\d{1,2}/\\d{1,2}/\\d{4})\\s*[-–—]\\s*(\\d{1,2}/\\d{1,2}/\\d{4})"
      - "from\\s+(\\d{1,2}/\\d{1,2}/\\d{4})\\s+to\\s+(\\d{1,2}/\\d{1,2}/\\d{4})"
      
  balance:
    patterns:
      - "balance\\s*[:：]\\s*\\$?([\\d,]+\\.\\d{2})"
      - "available\\s+balance\\s*[:：]\\s*\\$?([\\d,]+\\.\\d{2})"
      - "ending\\s+balance\\s*[:：]\\s*\\$?([\\d,]+\\.\\d{2})"

# File detection
fileDetection:
  extensions: [".pdf", ".xlsx", ".csv", ".txt"]
  filenamePatterns:
    - "boa.*"
    - "bankofamerica.*"
    - "statement.*"
    - "account.*"
    - "transaction.*"
    
  contentMarkers:
    - "BANK OF AMERICA"
    - "BOFA"
    - "USD"
    - "$"
    - "account"

# Processing rules
processing:
  trimWhitespace: true
  normalizeUnicode: true
  removeEmptyRows: true
  minConfidence: 0.8
  
  # Column alignment rules
  alignment:
    strictColumns: false
    tolerance: 2
    minColumnWidth: 12