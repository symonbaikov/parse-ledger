# Server Configuration
PORT=3001
NODE_ENV=development
FRONTEND_URL=http://localhost:3000
APP_URL=http://localhost:3000

# File storage (optional: override uploads directory, e.g. mounted volume in prod)
UPLOADS_DIR=

# Database Configuration
DATABASE_URL=postgresql://finflow:finflow@localhost:5432/finflow

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production-min-32-chars
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production-min-32-chars
JWT_REFRESH_EXPIRES_IN=30d

# Redis Configuration (for queues)
REDIS_HOST=localhost
REDIS_PORT=6379

# Google APIs Configuration
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3001/api/v1/auth/google/callback

# Google Drive OAuth (optional, falls back to GOOGLE_CLIENT_ID/SECRET)
GOOGLE_DRIVE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_DRIVE_CLIENT_SECRET=your-google-client-secret
GOOGLE_DRIVE_REDIRECT_URI=http://localhost:3001/api/v1/integrations/google-drive/callback
GOOGLE_DRIVE_STATE_SECRET=change-this-state-secret

# Gmail OAuth (optional, falls back to GOOGLE_CLIENT_ID/SECRET)
GMAIL_CLIENT_ID=your-gmail-client-id.apps.googleusercontent.com
GMAIL_CLIENT_SECRET=your-gmail-client-secret
GMAIL_REDIRECT_URI=http://localhost:3001/api/v1/integrations/gmail/callback
GMAIL_STATE_SECRET=change-this-state-secret

# Google Cloud Pub/Sub (for Gmail Watch API)
GOOGLE_CLOUD_PROJECT_ID=your-project-id
PUBSUB_TOPIC_NAME=gmail-watch-notifications
PUBSUB_SUBSCRIPTION_NAME=gmail-watch-sub
PUBSUB_WEBHOOK_TOKEN=your-webhook-verification-token

# Dropbox OAuth
DROPBOX_CLIENT_ID=your-dropbox-app-key
DROPBOX_CLIENT_SECRET=your-dropbox-app-secret
DROPBOX_REDIRECT_URI=http://localhost:3001/api/v1/integrations/dropbox/callback
DROPBOX_STATE_SECRET=change-this-state-secret

# Token encryption (Google Drive, Dropbox + other integrations)
INTEGRATIONS_ENCRYPTION_KEY=change-this-32+char-key

# Google Sheets Webhook
SHEETS_WEBHOOK_TOKEN=your-sheets-webhook-secret
# Optional whitelists (comma-separated). Leave empty to accept any.
SHEETS_ALLOWED_SPREADSHEET_IDS=
SHEETS_ALLOWED_SHEETS=
# Optional column filter to drop noise from other edits (e.g. "2,3,6" for B,C,F)
SHEETS_WATCH_COLUMNS=

# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your-telegram-bot-token

# Resend (workspace invitations)
RESEND_API_KEY=re_your-resend-api-key
RESEND_FROM="FinFlow <noreply@your-domain.com>"
RESEND_REPLY_TO=

# Logging
LOG_LEVEL=info
SERVICE_NAME=finflow-backend
METRICS_AUTH_TOKEN=42758c3738cfb1b225f789027fdf19a14312e24f8703967da07070476efc3bb0

# Reliability / timeouts (optional)
STATEMENT_PARSING_CONCURRENCY=2
AI_TIMEOUT_MS=20000
AI_CONCURRENCY=2
AI_CIRCUIT_FAILURE_THRESHOLD=3
AI_CIRCUIT_COOLDOWN_MS=300000
TELEGRAM_TIMEOUT_MS=10000
RESEND_TIMEOUT_MS=10000

# Import Session Configuration
# Deduplication settings
DEDUP_DATE_TOLERANCE_DAYS=3
DEDUP_AMOUNT_TOLERANCE_PERCENT=2
DEDUP_TEXT_SIMILARITY_THRESHOLD=0.75
# Import workflow settings
IMPORT_AUTO_COMMIT=false
IMPORT_MAX_RETRIES=3
IMPORT_RETRY_BACKOFF_BASE_MS=30000
IMPORT_CONFLICT_AUTO_RESOLVE_THRESHOLD=0.95
