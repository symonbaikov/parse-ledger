# План покрытия клавиатурных сокращений (tinykeys)

Этот документ описывает страницы, модули и секции, где нужно добавить действия с комбинациями клавиш. Реализация должна использовать библиотеку `tinykeys`.

## Общие принципы
- Используем `tinykeys` для привязки сочетаний.
- Сочетания не должны перехватываться, когда фокус в `input`, `textarea`, `select` или `contenteditable`.
- Для модалок/дровер — поддерживать `Esc` (закрытие), и при необходимости отдельные действия (например, «Скачать», «Печать»).

---

## Глобальная навигация
**Компонент:** `frontend/app/components/Navigation.tsx`  
**Секции:**
- Основное меню (desktop и mobile)
- Меню пользователя
- Переключение языка/темы  
**Что добавить:**
- Быстрый переход на ключевые страницы (например, Стейтменты, Хранилище, Таблицы, Отчёты, Категории).
- Переключение темы.
- Открытие мобильного меню (на мобильных).

---

## Редиректы и служебные страницы
**Страницы:**
- `frontend/app/page.tsx`
- `frontend/app/settings/page.tsx`
**Что добавить:**
- На этих маршрутах нет действий, поэтому shortcuts не требуются (можно пересмотреть при появлении интерактивных элементов).

---

## Страницы заявлений (Statements)
**Страница:** `frontend/app/statements/page.tsx`  
**Секции:**
- Поиск
- Пагинация
- Открытие модалок (загрузка, лог, предпросмотр)
- Действия по строке (просмотр, скачать, удалить, обновить)
**Что добавить:**
- Фокус в поиск (например, `/`).
- Переход по страницам (например, `[` и `]`).
- Открытие модалки загрузки.
- Обновление списка.

**Страница просмотра:** `frontend/app/statements/[id]/view/page.tsx`  
**Секции:**
- Action bar (назад / редактировать / печать / скачать)  
**Что добавить:**
- Назад.
- Печать.
- Переход к редактированию.

**Страница редактирования:** `frontend/app/statements/[id]/edit/page.tsx`  
**Секции:**
- Таблица транзакций
- Массовые действия
- Сохранение  
**Что добавить:**
- Сохранение изменений.
- Отмена/выход из редактирования.
- Массовые действия (например, применить категорию).

**Страница загрузки:** `frontend/app/upload/page.tsx`  
**Секции:**
- Выбор файлов
- Google Sheets
- Статус загрузки  
**Что добавить:**
- Фокус в dropzone/выбор файла.
- Запуск загрузки.
- Переключение разрешения дубликатов.

---

## Хранилище (Storage)
**Страница:** `frontend/app/storage/page.tsx`  
**Секции:**
- Поиск
- Фильтры
- Сортировка
- Карточки/таблица файлов  
**Что добавить:**
- Фокус в поиск.
- Быстрое открытие фильтров.
- Переключение вида/сортировки.
- Быстрое открытие просмотра файла (если есть выделение).

**Страница детали файла:** `frontend/app/storage/[id]/page.tsx`  
**Секции:**
- Tabs (транзакции/шары/разрешения)
- Действия (скачать/обновить/восстановить)  
**Что добавить:**
- Переключение вкладок.
- Обновить данные.
- Скачать файл.

---

## Транзакции / детализация
**Компоненты:**
- `frontend/app/components/transactions/TransactionsPageView.tsx`
- `frontend/app/components/transactions/TransactionsTable.tsx` (если есть)
- `frontend/app/components/transactions/DetailsDrawer.tsx` (если есть)  
**Секции:**
- Таблица транзакций
- Дровер деталей
- Массовые действия  
**Что добавить:**
- Открытие/закрытие дровера.
- Массовые действия по выделению.
- Быстрый поиск/фильтр.

---

## Кастомные таблицы
**Страница списка:** `frontend/app/custom-tables/page.tsx`  
**Секции:**
- Поиск
- Фильтры
- Создание  
**Что добавить:**
- Фокус в поиск.
- Открытие формы создания.

**Страница таблицы:** `frontend/app/custom-tables/[id]/page.tsx`  
**Секции:**
- Редактирование таблицы
- Полноэкранный режим
- Масштабирование  
**Что добавить:**
- Вход/выход из полноэкранного режима.
- Увеличение/уменьшение масштаба.
- Сохранение.

**Импорт Google Sheets:** `frontend/app/custom-tables/import/google-sheets/page.tsx`  
**Секции:**
- Превью
- Коммит импорта  
**Что добавить:**
- Запуск превью.
- Запуск импорта.

---

## Ввод данных (Data Entry)
**Страница:** `frontend/app/data-entry/page.tsx`  
**Секции:**
- Таб формы
- Таблица записей
- Модалки редактирования  
**Что добавить:**
- Переключение вкладок.
- Фокус в поиск.
- Добавление записи.
- Сохранение формы.

---

## Категории
**Страница:** `frontend/app/categories/page.tsx`  
**Секции:**
- Поиск
- Создание/редактирование/удаление  
**Что добавить:**
- Фокус в поиск.
- Открытие формы создания.
- Сохранение/отмена в модалке.

---

## Отчёты
**Страница:** `frontend/app/reports/page.tsx`  
**Секции:**
- Переключение табов (sheets/local/statements)
- Фильтры по периодам
- Обновление данных  
**Что добавить:**
- Переключение вкладок.
- Обновление текущего таба.
- Быстрый выбор периода.

---

## Интеграции
**Страница:** `frontend/app/integrations/page.tsx`  
**Секции:**
- Карточки интеграций  
**Что добавить:**
- Быстрое открытие интеграции (Google Sheets).

**Google Sheets:** `frontend/app/integrations/google-sheets/page.tsx`  
**Секции:**
- Подключение
- Синхронизация
- Удаление  
**Что добавить:**
- Запуск подключения.
- Запуск синхронизации выбранного подключения.

**OAuth callback:** `frontend/app/google-sheets/callback/page.tsx`  
**Секции:**
- Подтверждение подключения
- Отправка формы  
**Что добавить:**
- Подтвердить подключение.
- Фокус в поле Sheet ID.

---

## Аутентификация
**Страницы:**  
- `frontend/app/(auth)/login/page.tsx`  
- `frontend/app/(auth)/register/page.tsx`  
**Секции:**
- Форма логина/регистрации  
**Что добавить:**
- Отправка формы (Enter уже есть через submit, но можно добавить сочетание).
- Фокус в поле email.

---

## Настройки
**Профиль:** `frontend/app/settings/profile/page.tsx`  
**Секции:**
- Переключение секций (profile/sessions/email/password)
- Сохранение  
**Что добавить:**
- Переключение секций.
- Сохранение текущей формы.

**Telegram:** `frontend/app/settings/telegram/page.tsx`  
**Секции:**
- Подключение
- Отправка отчётов  
**Что добавить:**
- Подключение.
- Отправка отчёта (daily/monthly).

**Workspace:** `frontend/app/settings/workspace/page.tsx`  
**Секции:**
- Приглашения
- Управление участниками  
**Что добавить:**
- Открытие формы приглашения.
- Копирование ссылки (если есть кнопка).

---

## Админка
**Страница:** `frontend/app/admin/page.tsx`  
**Секции:**
- Таблицы (Statements/Audit)
- Поиск/обновление  
**Что добавить:**
- Переключение табов.
- Фокус в поиск.
- Обновление списка.

**Пользователи:** `frontend/app/admin/users/page.tsx`  
**Секции:**
- Поиск
- Редактирование прав  
**Что добавить:**
- Фокус в поиск.
- Открытие модалки прав для выбранного пользователя.

---

## Публичные страницы
**Shared:** `frontend/app/shared/[token]/page.tsx`  
**Секции:**
- Поле пароля
- Скачивание  
**Что добавить:**
- Подтверждение пароля (Enter/сочетание).
- Скачать файл.

**Invite:** `frontend/app/invite/[token]/page.tsx`  
**Секции:**
- Принять приглашение  
**Что добавить:**
- Принять приглашение (если форма/кнопка доступна).

---

## Модальные окна и оверлеи
**Компоненты:**
- `frontend/app/components/PDFPreviewModal.tsx`
- `frontend/app/components/ui/modal-shell.tsx`
- `frontend/app/components/ui/drawer-shell.tsx`  
**Секции:**
- Закрытие
- Основные действия (скачать/печать/открыть)  
**Что добавить:**
- Унифицированные сочетания для закрытия (`Esc`).
- Быстрые действия в модалке PDF (скачать, печать, открыть).

---

## Примечание по внедрению
Реализация `tinykeys` должна быть централизована по страницам/компонентам с чёткой областью действия:
- Глобальные — в навигации/лейауте.
- Локальные — в конкретных страницах и модалках.
- Не перехватывать ввод текста и формы.